# Alert Center 실습

새로운 알림 정책을 생성합니다. CPU부하기를 통하여 트래픽을 발생 시킵니다. 
발생된 트래픽이 정상적으로 감지되어 설정한 알림 수신 채널로 알림이 오는지 확인하는 실습입니다.

``` mermaid
graph LR
    시작(시작) --> 연락처설정(연락처 설정 및 수신 채널 생성)
    연락처설정 --> 메트릭알림정책생성(메트릭 알림 정책 생성 및 알림 확인)
    메트릭알림정책생성 --> 이벤트기반알림정책생성(이벤트 기반 알림 정책 생성 및 알림 확인)
    이벤트기반알림정책생성 --> 종료(실습 종료)

    %% 강조
    class 연락처설정,메트릭알림정책생성,이벤트기반알림정책생성 emphasized;
    
    %% 클래스 스타일
    classDef emphasized fill:#f9f,stroke:#333,stroke-width:4px;
```

## 1. 연락처 설정 및 수신 채널 생성


1. 우측 상단 프로필 이미지 클릭 > 계정 정보 클릭
2. 계정 정보 내 이메일 주소 및 휴대폰 번호 입력
3. 카카오 클라우드 콘솔 > 전체 서비스 > Alert Center 접속
4. 수신 채널 클릭
5. 수신 채널 생 버튼 클릭
    - 수신 채널 이름 : `alert`
    - 메인 채널 유형 : `기본 채널` > `이메일` 선택
    - 수신자 유형
        -  `사용자`
        - `{본인의 이메일}` 선택
        - **Note**: "{본인의 이메일}" 부분을 이메일 주소로 교체하세요.
    - 대체 채널: `미사용` 선택
    - 사용여부 : `사용` 선택
6. 생성 버튼 클릭

## 2. 메트릭 알림 정책 생성 및 알림 확인
1. 카카오 클라우드 콘솔 > 전체 서비스 > Alert Center 접속
2. 알림 정책 생성 버튼 클릭
 - 1단계: 알림 조건 설정
    - 조건 유형 : `메트릭`
    - 서비스 : `Beyond Compute Service`
    - 조건 설정
        - 메트릭 항목 : `CPU Usage`
        - 리소스: `인스턴스`, `bastion`
    - 임계치 : `1%이상`
    - 지속시간 : `1분`
    - 심각도 : `경고`
    - `다음` 버튼 클릭
- 2단계: 수신 채널 설정
    - 채널 유형 : `이메일`
    - 수신 채널 : `alert`
    - `다음` 버튼 클릭
- 3단계: 기본 정보 설정
    - 알림 정책 이름 : `CPU_Alert`
    - 알림 정책 설명 (선택) : `빈 칸`
    - 사용 여부 : `기본 체크 상태`
    - `다음` 버튼 클릭
- 4단계: 검토
    - `설정 정보 확인`
    - `생성` 버튼 클릭
3. 카카오 클라우드 콘솔 > 전체 서비스 > Virtual Machine 접속
4. 터미널 명령어 입력
    - keypair를 다운받아놓은 폴더로 이동
    - Bastion에 접속
  
    #### **lab13-2-8**
    ```bash
    ssh -i keypair.pem ubuntu@{Bastion의 public IP}
    ```
5. CPU 부하기 패키지 설치 및 부하 생성 및 종료 - 터미널 명령어 입력
  
    #### **lab13-2-9-1**
    ```bash
    sudo apt install stress -y
    ```
  
    #### **lab13-2-9-2**
    ```bash
    stress --cpu 2
    ```
    - 1분 후 ctrl+ C 입력
  
    #### **lab13-2-9-3**
    ```bash 
    crtl + C 
    ```
    
6. 입력했던 이메일 주소에 부하 알림 확인하기

## 3. 이벤트 기반 알림 정책 생성 및 알림 확인
1. 카카오 클라우드 콘솔 > 전체 서비스 > Alert Center 접속
2. 알림 정책 생성 버튼 클릭
 - 1단계: 알림 조건 설정
    - 조건 유형 : `이벤트`
    - 서비스 : `Virtual Machine`
    - 조건 설정
        - 이벤트 항목 : `Instance Reboot`
    - `다음` 버튼 클릭
- 2단계: 수신 채널 설정
    - 채널 유형 : `이메일`
    - 수신 채널 : `alert`
    - `다음` 버튼 클릭
- 3단계: 기본 정보 설정
    - 알림 정책 이름 : `event_Alert`
    - 알림 정책 설명 (선택) : `빈 칸`
    - 사용 여부 : `기본 체크 상태`
    - `다음` 버튼 클릭
- 4단계: 검토
    - `설정 정보 확인`
    - `생성` 버튼 클릭
3. 카카오 클라우드 콘솔 > 전체 서비스 > Virtual Machine 접속
4. bastion 인스턴스 우측 메뉴바 클릭 > 재시작 버튼 클릭
5. 입력했던 이메일 주소에 이벤트 알림 확인하기

